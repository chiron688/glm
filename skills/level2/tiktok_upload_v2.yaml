schema_version: v1
id: "tiktok_upload_v2"
name: "TikTok Upload v2"
version: "2.0.0"
description: "Flow skill to upload a video with checkpoints (uses existing publish sub-skills)."
app:
  name: "TikTok"
  packages: ["com.zhiliaoapp.musically"]
platforms: ["adb", "hdc"]
risk: high
level: 2
role: flow
owner: system2
vocab_path: "skills/common/vocab.yaml"
routing:
  keywords:
    - "{{routing_publish_keywords}}"
  keyword_mode: any
  priority: 30
  require_app: ["TikTok"]
inputs:
  caption:
    type: string
    default: ""
preconditions:
  mode: best_effort
  condition:
    app_is: "TikTok"
steps:
  - id: "open_create"
    action: RunSkill
    skill_id: "publish_open_create"
  - id: "select_upload"
    action: RunSkill
    skill_id: "publish_select_upload"
  - id: "pick_asset"
    action: RunSkill
    skill_id: "publish_pick_asset"
  - id: "edit_caption"
    action: RunSkill
    skill_id: "publish_edit_caption"
    inputs:
      caption: "{{caption}}"
  - id: "publish"
    action: RunSkill
    skill_id: "publish_post"
  - id: "verify"
    action: RunSkill
    skill_id: "publish_verify_post_strict"
postconditions:
  mode: best_effort
  condition:
    text_any_contains: "{{upload_success_markers}}"
